import{O as H,a as E,c as M,r as v,ad as b,o as Q,b as p,d as U,e as I,f,l as r,Q as C,k as q,p as z}from"./index-X5AUvwv7.js";const J={__name:"tAddress",props:{barangayCode:String,location:String,cityCode:{type:String,default:"141102000"},locationError:{type:String,default:null},barangayError:{type:String,default:null},hideLoader:{type:Boolean,default:!1},loading:{type:Boolean,default:null},loadingMessage:{type:String,default:null}},emits:["update:barangayCode","update:location","update:loading","update:loadingMessage","submit"],setup(g,{emit:P}){const y=H("$api"),s=g,m=P,w=E(!1),S=E(""),V=M({get:()=>s.loading??w.value,set:n=>{w.value=n,m("update:loading",n)}}),T=M({get:()=>s.loadingMessage??S.value,set:n=>{S.value=n,m("update:loadingMessage",n)}}),L=M({get:()=>s.barangayCode,set:n=>m("update:barangayCode",n)}),N=M({get:()=>s.location,set:n=>m("update:location",n)}),i=v({data:[],loading:!1}),d=v({data:[],loading:!1}),t=v({data:[],loading:!1}),o=v({data:[],loading:!1}),a=v({region:new b(null).setName("Region"),province:new b(null).setName("Province"),city:new b(null).setName("City"),barangay:new b(s.barangayCode??null).setName("Barangay"),location:new b(s.location??null).setName("Location")}),_=()=>{i.loading=!0,d.data=[],t.data=[],o.data=[],a.region.reset(null),a.province.reset(null),a.city.reset(null),a.barangay.reset(null),y.get("/address/regions").then(n=>{i.data=k(n.data)}).finally(()=>{i.loading=!1})},h=n=>{d.loading=!0,t.data=[],o.data=[],a.province.reset(null),a.city.reset(null),a.barangay.reset(null),y.get(`/address/provinces/${n}`).then(e=>{d.data=x(e.data)}).finally(()=>{d.loading=!1})},O=n=>{t.loading=!0,o.data=[],a.city.reset(null),a.barangay.reset(null),y.get(`/address/cities/${n}`).then(e=>{t.data=B(e.data)}).finally(()=>{t.loading=!1})},R=n=>{o.loading=!0,a.barangay.reset(null),y.get(`/address/barangays/${n}`).then(e=>{o.data=$(e.data)}).finally(()=>{o.loading=!1})},A=n=>{V.value=!0,T.value="Preparing adress module, please wait...",y.get(`/address/initial/city/${n}`).then(e=>{i.data=k(e.data.regions),d.data=x(e.data.provinces),t.data=B(e.data.cities),o.data=$(e.data.barangays);let u=e.data.cities.find(c=>c.code==n);a.region.value=u.regionCode,a.province.value=u.provinceCode,a.city.value=n}).finally(()=>{V.value=!1})},k=n=>n.map(e=>({label:e.name,value:e.code,description:e.regionName})),x=n=>n.map(e=>({label:e.name,value:e.code})),B=n=>n.map(e=>({label:e.name,value:e.code})),$=n=>n.map(e=>({label:e.name,value:e.code}));return Q(()=>{s.cityCode?A(s.cityCode):_()}),(n,e)=>{const u=p("TSpinnerCircles"),c=p("TList"),G=p("TSpinnerOrbit"),K=p("TInput"),j=p("TInnerLoading"),F=p("TGroup");return U(),I(F,{label:"Address",class:"grid grid-cols-2 gap-x-2 bg-white px-2 pt-3"},{default:f(()=>[r(c,{modelValue:a.region.value,"onUpdate:modelValue":[e[0]||(e[0]=l=>a.region.value=l),h],options:i.data,label:a.region.name,error:a.region.error,errorMessage:a.region.errorMessage,readonly:i.loading,class:"cols-span-1"},C({_:2},[i.loading?{name:"append",fn:f(()=>[r(u,{class:"h-6 w-6"})]),key:"0"}:void 0]),1032,["modelValue","options","label","error","errorMessage","readonly"]),r(c,{modelValue:a.province.value,"onUpdate:modelValue":[e[1]||(e[1]=l=>a.province.value=l),O],options:d.data,label:a.province.name,error:a.province.error,errorMessage:a.province.errorMessage,class:"cols-span-1",readonly:d.loading,disabled:!a.region.value},C({_:2},[d.loading?{name:"append",fn:f(()=>[r(u,{class:"h-6 w-6"})]),key:"0"}:void 0]),1032,["modelValue","options","label","error","errorMessage","readonly","disabled"]),r(c,{modelValue:a.city.value,"onUpdate:modelValue":[e[2]||(e[2]=l=>a.city.value=l),R],options:t.data,label:a.city.name,error:a.city.error,errorMessage:a.city.errorMessage,class:"cols-span-1",readonly:t.loading,disabled:!a.province.value},C({_:2},[t.loading?{name:"append",fn:f(()=>[r(u,{class:"h-6 w-6"})]),key:"0"}:void 0]),1032,["modelValue","options","label","error","errorMessage","readonly","disabled"]),r(c,{modelValue:L.value,"onUpdate:modelValue":e[3]||(e[3]=l=>L.value=l),options:o.data,label:a.barangay.name,error:!!g.barangayError,errorMessage:g.barangayError,class:"cols-span-1",readonly:o.loading,disabled:!a.city.value},C({_:2},[o.loading?{name:"append",fn:f(()=>[r(G,{class:"h-6 w-6"})]),key:"0"}:void 0]),1032,["modelValue","options","label","error","errorMessage","readonly","disabled"]),r(K,{modelValue:N.value,"onUpdate:modelValue":e[4]||(e[4]=l=>N.value=l),dense:"",class:"col-span-2",label:"House No./Street/etc...",error:!!g.locationError,errorMessage:g.locationError,onKeyup:e[5]||(e[5]=q(l=>m("submit"),["enter"]))},null,8,["modelValue","error","errorMessage"]),g.hideLoader?z("",!0):(U(),I(j,{key:0,active:V.value,text:T.value},null,8,["active","text"]))]),_:1})}}};export{J as default};

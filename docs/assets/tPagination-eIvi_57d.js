import{a as G,c as p,w as L,o as H,b as J,d as I,m as M,q as r,l as k,g as c,p as v,s as V,t as N,I as K,P as Q}from"./index-X5AUvwv7.js";const R={class:"flex select-none items-center"},W={__name:"tPagination",props:{modelValue:{type:Number,default:1,validator:e=>e>=0},total:{type:Number,default:1},totalPage:{type:Number,default:1},limit:{type:Number,default:10,validator:e=>e>0},offset:{type:Number,default:0,validator:e=>e>=0},maxPages:{type:Number,default:5,validator:e=>e>0},linkFormat:{type:Function,default:e=>e},iconSize:{type:String,default:"md",validator:e=>["xs","sm","md","lg","xl","2xl","3xl","4xl","5xl"].indexOf(e)>-1},nextIcon:{type:String,default:"navigate_next"},prevIcon:{type:String,default:"navigate_before"},startIcon:{type:String,default:"keyboard_double_arrow_left"},endIcon:{type:String,default:"keyboard_double_arrow_right"},ellipsis:{type:String,default:"..."},hideEllipsis:{type:Boolean,default:!1},hideBoundaryLinks:{type:Boolean,default:!1},hideDirectionLinks:{type:Boolean,default:!1},linkClass:{type:String,default:"p-1 w-8 h-8 rounded-md"},activeClass:{type:String,default:"bg-primary text-light bg-glossy"},ellsipsisClass:{type:String,default:"px-1 flex items-center justify-center text-center leading-none"}},emits:["update:modelValue","update:offset","update:limit","update:totalPage","paginate"],setup(e,{expose:E,emit:w}){const s=e,f=w,a=G({start:0,end:10,pages:0,currentPage:0,next:null,prev:null,totalPages:0,pageLinks:[]}),D=p(()=>s.modelValue),F=p(()=>s.total),A=p({get:()=>s.limit,set:t=>f("update:limit",t)}),y=p(()=>a.value.currentPage<a.value.totalPages),h=p(()=>a.value.currentPage>1),n=(t,i=!0)=>{T(t,s.total,s.limit,s.maxPages,i&&a.value.currentPage!=t)},T=(t,i,u,l,$=!0)=>{let o=Math.ceil(i/u),d=Math.min(Math.max(1,t),o),b=((d>0?d:1)-1)*u,O=Math.min(b+u,i),x=Math.max(1,d-Math.floor(l/2)),j=Math.min(x+l-1,o),q=Math.max(0,l-(j-x+1)),P=Math.max(1,x-q),B=Math.min(P+l-1,o),S=Array.from({length:B-P+1},(g,m)=>m+P);a.value={start:b,end:O,pages:S.length>0?S:[1],currentPage:d,next:null,prev:null,totalPages:o,pageLinks:[]},S.forEach(g=>{a.value.pageLinks.push(s.linkFormat(g))});let C=d-1;if(a.value.prev=C,P>1){let g=1,m=C>1?s.ellipsis:"";a.value.pageLinks.unshift(g,C,m)}let z=d+1;if(a.value.next=z,B<o){let g=o,m=z<o?s.ellipsis:"";a.value.pageLinks.push(m,z,g)}f("update:offset",b),f("update:totalPage",o),f("update:modelValue",d),$&&f("paginate",a.value)};return L(D,t=>{n(s.modelValue,!1)}),L(A,t=>{n(s.modelValue)}),L(F,t=>{n(s.modelValue,!1)}),H(()=>{n(s.modelValue,!1)}),E({changePage:n}),(t,i)=>{const u=J("TButton");return I(),M("nav",R,[e.hideBoundaryLinks?v("",!0):r(t.$slots,"first_page",{key:0,page:1,change:()=>n(1),active:h.value},()=>[k(u,{onClick:i[0]||(i[0]=l=>n(1)),icon:e.startIcon,iconSize:e.iconSize,class:c(e.linkClass),disabled:!h.value},null,8,["icon","iconSize","class","disabled"])]),e.hideDirectionLinks?v("",!0):r(t.$slots,"prev_page",{key:1,page:a.value.prev,change:()=>n(a.value.prev),active:h.value},()=>[k(u,{onClick:i[1]||(i[1]=l=>n(a.value.prev)),icon:e.prevIcon,iconSize:e.iconSize,class:c(e.linkClass),disabled:!h.value},null,8,["icon","iconSize","class","disabled"])]),!e.hideEllipsis&&a.value.pages.length>1&&a.value.pages[0]!=1?r(t.$slots,"ellipsis",{key:2},()=>[V("span",{class:c(e.ellsipsisClass)},N(e.ellipsis),3)]):v("",!0),(I(!0),M(K,null,Q(a.value.pages,l=>r(t.$slots,"default",{key:`page_${l}`,page:l,active:a.value.currentPage==l,change:()=>n(l)},()=>[k(u,{onClick:$=>n(l),label:`${l}`,class:c([e.linkClass,a.value.currentPage==l&&e.activeClass]),disabled:a.value.pageLinks.length<=0},null,8,["onClick","label","class","disabled"])])),128)),!e.hideEllipsis&&a.value.pages.length>1&&a.value.pages[a.value.pages.length-1]!=a.value.totalPages?r(t.$slots,"ellipsis",{key:3},()=>[V("span",{class:c(e.ellsipsisClass)},N(e.ellipsis),3)]):v("",!0),e.hideDirectionLinks?v("",!0):r(t.$slots,"next_page",{key:4,page:a.value.next,change:()=>n(a.value.next),active:y.value},()=>[k(u,{onClick:i[2]||(i[2]=l=>n(a.value.next)),icon:e.nextIcon,iconSize:e.iconSize,class:c(e.linkClass),disabled:!y.value},null,8,["icon","iconSize","class","disabled"])]),e.hideBoundaryLinks?v("",!0):r(t.$slots,"last_page",{key:5,page:a.value.totalPages,change:()=>n(a.value.totalPages),active:y.value},()=>[k(u,{onClick:i[3]||(i[3]=l=>n(a.value.totalPages)),icon:e.endIcon,iconSize:e.iconSize,class:c(e.linkClass),disabled:!y.value},null,8,["icon","iconSize","class","disabled"])])])}}};export{W as default};

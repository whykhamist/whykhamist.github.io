import{C as E,a as f,c as i,b as K,d as R,e as U,Q as q,f as V,l as N,s as I,P as F,R as H,S as Q,q as W,h as Y,U as B,B as G,V as J,x as X,z as Z}from"./index-2sZdn9Tb.js";const _={name:"Number",isValid:(t,l={})=>l.min!==void 0&&t<l.min||l.max!==void 0&&t>l.max||`${t}`.length>l.maxLength||l.integer&&!/^-?\d+$/.test(t)||l.float&&!/^-?\d+\.?\d*$/.test(t)?!1:/^-?\d+\.?\d*$/.test(t),parse:t=>t*1},ee={name:"String",isValid:(t,l={})=>!(l.maxLength!==void 0&&t.length>l.maxLength),parse:t=>t},$={text:ee,number:_},te={class:"flex flex-col-reverse items-center gap-0.5"},ae=["name","maxlength","autocorrect","autocapitalize","autocomplete"],le={__name:"tInput",props:{modelValue:[String,Number],name:String,maxlength:{type:Number,default:255},min:{type:Number,default:void 0},max:{type:Number,default:void 0},type:{type:String,default:"text"},inputClass:{type:Array,default:()=>[]},hideNumberButtons:{type:Boolean,default:!1},autocomplete:{type:String,default:"on",validator:t=>["on","off"].indexOf(t)>-1},autocorrect:{type:String,default:"on",validator:t=>["on","off"].indexOf(t)>-1},autocapitalize:{type:String,default:"sentences",validator:t=>["none","sentences","words","characters"].indexOf(t)>-1}},emits:["update:modelValue","paste"],setup(t,{emit:l}){const z=E(),n=t,d=l,v=f(!1),g=f(!1),x=f(null),c=f(null),o=i(()=>$[n.type]??$.text),m=i(()=>({min:n.min,max:n.max,maxLength:n.maxlength})),O=i(()=>({type:["text","password","email"].indexOf(n.type)>-1?n.type:"text"})),C=i(()=>{let e={};return n.type=="number"&&Object.assign(e,{paste:P}),e}),h=i({get:()=>n.modelValue,set:e=>d("update:modelValue",o.value.parse(e))}),M=i(()=>{let e={};return n.type=="number"&&Object.assign(e,{mousewheel:a=>L(a)}),e}),P=e=>{if(e.type=="paste"){let r=(e.clipboardData||window.Clipboard).getData("Text"),u=S(e,r),s=o.value.parse(u);o.value.isValid(s,m.value)||(e.stopPropagation(),e.preventDefault()),d("paste",e)}},k=e=>{let a=S(e,e.key),r=o.value.parse(a);o.value.isValid(r,m.value)||e.preventDefault()},S=(e,a)=>{let r=e.target.selectionStart,u=e.target.selectionEnd,s=`${e.target.value}`;return`${s.substring(0,r)}${a}${s.substring(u,s.length)}`},L=e=>{e.preventDefault(),n.type=="number"&&(e.deltaY>0?b():y())},j=()=>{y(),c.value=setTimeout(()=>{v.value=!0,T(),clearTimeout(c.value)},500)},w=()=>{v.value=!1,clearTimeout(c.value),clearInterval(x.value)},A=()=>{b(),c.value=setTimeout(()=>{g.value=!0,T()},500)},D=()=>{g.value=!1,clearTimeout(c.value),clearInterval(x.value)},T=()=>{isNaN(n.modelValue)&&d("update:modelValue",0),x.value=setInterval(()=>{v.value?y():g.value&&b()},50)},y=(e=1)=>{let a=(parseInt(n.modelValue)||0)+e;o.value.isValid(a,m.value)&&d("update:modelValue",a)},b=(e=1)=>{let a=(parseInt(n.modelValue)||0)-e;o.value.isValid(a,m.value)&&d("update:modelValue",a)};return(e,a)=>{const r=K("TButton");return R(),U(Z("TFieldWrapper"),B(M.value),q({default:V(({classNames:u,attr:s})=>[X(I("input",G({"onUpdate:modelValue":a[0]||(a[0]=p=>h.value=p)},Object.assign({},s,O.value),B(C.value,!0),{name:t.name,class:[[...u,...t.inputClass],"h-[22px]"],maxlength:t.maxlength,onKeypress:k,autocorrect:t.autocorrect,autocapitalize:t.autocapitalize,autocomplete:t.autocomplete}),null,16,ae),[[J,h.value]])]),_:2},[t.type=="number"&&!t.hideNumberButtons?{name:"append",fn:V(()=>[I("div",te,[N(r,{icon:"remove",iconSize:"xs",class:"rounded-b-md border border-dark/25 bg-glossy",tabindex:"-1",onMousedown:A,onMouseup:D,onMouseleave:D}),N(r,{icon:"add",iconSize:"xs",class:"rounded-t-md border border-dark/25 bg-glossy",tabindex:"-1",onMousedown:j,onMouseup:w,onMouseleave:w})])]),key:"0"}:void 0,F(Y(z),(u,s)=>({name:s,fn:V(p=>[W(e.$slots,s,Q(H(p)))])}))]),1040)}}};export{le as default};

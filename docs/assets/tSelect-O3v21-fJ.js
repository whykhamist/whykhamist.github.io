import{u as V,y as ee,w as te,h as ae,o as x,c as le,l as A,K as oe,H as M,T as ne,t as $,p as ie,N as H,O as ue,a as c,U as re}from"./headlessui-float-1CD5-Rfb.js";import{x as se,a as y,b as de,u as ve}from"./use-tracked-pointer-m9yFt7NE.js";import{f as pe,a as ce}from"./hidden-DdBUAIR-.js";import{d as fe,e as be}from"./use-controllable-x0iApZmD.js";import{p as me}from"./use-text-value-U7DRmege.js";import{K as z,a as R,c as f,L as xe,o as F,w as G,$ as q,I as J,M as ge,N as he,n as D,O as ye,Z as L,b as Q,d as j,e as W,f as _,h as C,t as Z,y as Oe,l as N,s as U,g as Se,P as we,m as Re}from"./index-2sZdn9Tb.js";import"./floating-ui.vue.esm-W96sor2j.js";function Le(t,b){return t===b}var ke=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ke||{}),Te=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Te||{}),Pe=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Pe||{});function Ve(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let X=Symbol("ListboxContext");function E(t){let b=ye(X,null);if(b===null){let O=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(O,E),O}return b}let Ie=z({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Le},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:b,attrs:O,emit:k}){let e=R(1),p=R(null),m=R(null),d=R(null),v=R([]),a=R(""),l=R(null),r=R(1);function S(o=n=>n){let n=l.value!==null?v.value[l.value]:null,i=ue(o(v.value.slice()),h=>x(h.dataRef.domRef)),s=n?i.indexOf(n):null;return s===-1&&(s=null),{options:i,activeOptionIndex:s}}let w=f(()=>t.multiple?1:0),[T,I]=fe(f(()=>t.modelValue),o=>k("update:modelValue",o),f(()=>t.defaultValue)),P=f(()=>T.value===void 0?V(w.value,{1:[],0:void 0}):T.value),u={listboxState:e,value:P,mode:w,compare(o,n){if(typeof t.by=="string"){let i=t.by;return(o==null?void 0:o[i])===(n==null?void 0:n[i])}return t.by(o,n)},orientation:f(()=>t.horizontal?"horizontal":"vertical"),labelRef:p,buttonRef:m,optionsRef:d,disabled:f(()=>t.disabled),options:v,searchQuery:a,activeOptionIndex:l,activationTrigger:r,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,n,i){if(t.disabled||e.value===1)return;let s=S(),h=se(o===y.Specific?{focus:y.Specific,id:n}:{focus:o},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:B=>B.id,resolveDisabled:B=>B.dataRef.disabled});a.value="",l.value=h,r.value=i??1,v.value=s.options},search(o){if(t.disabled||e.value===1)return;let n=a.value!==""?0:1;a.value+=o.toLowerCase();let i=(l.value!==null?v.value.slice(l.value+n).concat(v.value.slice(0,l.value+n)):v.value).find(h=>h.dataRef.textValue.startsWith(a.value)&&!h.dataRef.disabled),s=i?v.value.indexOf(i):-1;s===-1||s===l.value||(l.value=s,r.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(o,n){let i=S(s=>[...s,{id:o,dataRef:n}]);v.value=i.options,l.value=i.activeOptionIndex},unregisterOption(o){let n=S(i=>{let s=i.findIndex(h=>h.id===o);return s!==-1&&i.splice(s,1),i});v.value=n.options,l.value=n.activeOptionIndex,r.value=1},theirOnChange(o){t.disabled||I(o)},select(o){t.disabled||I(V(w.value,{0:()=>o,1:()=>{let n=L(u.value.value).slice(),i=L(o),s=n.findIndex(h=>u.compare(i,L(h)));return s===-1?n.push(i):n.splice(s,1),n}}))}};ee([m,d],(o,n)=>{var i;u.closeListbox(),te(n,ae.Loose)||(o.preventDefault(),(i=x(m))==null||i.focus())},f(()=>e.value===0)),xe(X,u),le(f(()=>V(e.value,{0:A.Open,1:A.Closed})));let g=f(()=>{var o;return(o=x(m))==null?void 0:o.closest("form")});return F(()=>{G([g],()=>{if(!g.value||t.defaultValue===void 0)return;function o(){u.theirOnChange(t.defaultValue)}return g.value.addEventListener("reset",o),()=>{var n;(n=g.value)==null||n.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:n,disabled:i,form:s,...h}=t,B={open:e.value===0,disabled:i,value:P.value};return q(J,[...o!=null&&P.value!=null?be({[o]:P.value}).map(([K,Y])=>q(pe,oe({features:ce.Hidden,key:K,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:s,name:K,value:Y}))):[],M({ourProps:{},theirProps:{...O,...ne(h,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:B,slots:b,attrs:O,name:"Listbox"})])}}}),De=z({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${$()}`}},setup(t,{attrs:b,slots:O,expose:k}){let e=E("ListboxButton");k({el:e.buttonRef,$el:e.buttonRef});function p(a){switch(a.key){case c.Space:case c.Enter:case c.ArrowDown:a.preventDefault(),e.openListbox(),D(()=>{var l;(l=x(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(y.First)});break;case c.ArrowUp:a.preventDefault(),e.openListbox(),D(()=>{var l;(l=x(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(y.Last)});break}}function m(a){switch(a.key){case c.Space:a.preventDefault();break}}function d(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),D(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),Ve(()=>{var l;return(l=x(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let v=de(f(()=>({as:t.as,type:b.type})),e.buttonRef);return()=>{var a,l;let r={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...w}=t,T={ref:e.buttonRef,id:S,type:v.value,"aria-haspopup":"listbox","aria-controls":(a=x(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=x(e.labelRef))==null?void 0:l.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:p,onKeyup:m,onClick:d};return M({ourProps:T,theirProps:w,slot:r,attrs:b,slots:O,name:"ListboxButton"})}}}),Be=z({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${$()}`}},setup(t,{attrs:b,slots:O,expose:k}){let e=E("ListboxOptions"),p=R(null);k({el:e.optionsRef,$el:e.optionsRef});function m(a){switch(p.value&&clearTimeout(p.value),a.key){case c.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case c.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),D(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case V(e.orientation.value,{vertical:c.ArrowDown,horizontal:c.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Next);case V(e.orientation.value,{vertical:c.ArrowUp,horizontal:c.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Previous);case c.Home:case c.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(y.First);case c.End:case c.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(y.Last);case c.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),D(()=>{var l;return(l=x(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case c.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),p.value=setTimeout(()=>e.clearSearch(),350));break}}let d=ie(),v=f(()=>d!==null?(d.value&A.Open)===A.Open:e.listboxState.value===0);return()=>{var a,l,r,S;let w={open:e.listboxState.value===0},{id:T,...I}=t,P={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(l=x(e.labelRef))==null?void 0:l.id)!=null?S:(r=x(e.buttonRef))==null?void 0:r.id,"aria-orientation":e.orientation.value,id:T,onKeydown:m,role:"listbox",tabIndex:0,ref:e.optionsRef};return M({ourProps:P,theirProps:I,slot:w,attrs:b,slots:O,features:H.RenderStrategy|H.Static,visible:v.value,name:"ListboxOptions"})}}}),_e=z({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${$()}`}},setup(t,{slots:b,attrs:O,expose:k}){let e=E("ListboxOption"),p=R(null);k({el:p,$el:p});let m=f(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),d=f(()=>V(e.mode.value,{0:()=>e.compare(L(e.value.value),L(t.value)),1:()=>L(e.value.value).some(u=>e.compare(L(u),L(t.value)))})),v=f(()=>V(e.mode.value,{1:()=>{var u;let g=L(e.value.value);return((u=e.options.value.find(o=>g.some(n=>e.compare(L(n),L(o.dataRef.value)))))==null?void 0:u.id)===t.id},0:()=>d.value})),a=me(p),l=f(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:p}));F(()=>e.registerOption(t.id,l)),ge(()=>e.unregisterOption(t.id)),F(()=>{G([e.listboxState,d],()=>{e.listboxState.value===0&&d.value&&V(e.mode.value,{1:()=>{v.value&&e.goToOption(y.Specific,t.id)},0:()=>{e.goToOption(y.Specific,t.id)}})},{immediate:!0})}),he(()=>{e.listboxState.value===0&&m.value&&e.activationTrigger.value!==0&&D(()=>{var u,g;return(g=(u=x(p))==null?void 0:u.scrollIntoView)==null?void 0:g.call(u,{block:"nearest"})})});function r(u){if(t.disabled)return u.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),D(()=>{var g;return(g=x(e.buttonRef))==null?void 0:g.focus({preventScroll:!0})}))}function S(){if(t.disabled)return e.goToOption(y.Nothing);e.goToOption(y.Specific,t.id)}let w=ve();function T(u){w.update(u)}function I(u){w.wasMoved(u)&&(t.disabled||m.value||e.goToOption(y.Specific,t.id,0))}function P(u){w.wasMoved(u)&&(t.disabled||m.value&&e.goToOption(y.Nothing))}return()=>{let{disabled:u}=t,g={active:m.value,selected:d.value,disabled:u},{id:o,value:n,disabled:i,...s}=t,h={id:o,ref:p,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":d.value,disabled:void 0,onClick:r,onFocus:S,onPointerenter:T,onMouseenter:T,onPointermove:I,onMousemove:I,onPointerleave:P,onMouseleave:P};return M({ourProps:h,theirProps:s,slot:g,attrs:O,slots:b,name:"ListboxOption"})}}});const Ce={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ne={class:"block truncate"},$e={__name:"tSelect",props:{modelValue:Object,options:Array},emits:["update:modelValue"],setup(t,{emit:b}){const O=t,k=b,e=R({width:0,height:0}),p=f({get:()=>O.modelValue,set:d=>k("update:modelValue",d)}),m=d=>{e.value.width=d.width,e.value.height=d.height};return(d,v)=>{const a=Q("TIcon"),l=Q("SizeObserver");return j(),W(C(Ie),{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=r=>p.value=r)},{default:_(()=>[N(C(re),{as:"div",class:"relative",placement:"bottom",portal:"",offset:4,flip:10,"floating-as":"template","adaptive-width":""},{default:_(()=>[N(C(De),{class:"relative w-full rounded-lg border border-gray-200 bg-white py-2 pl-3.5 pr-10 text-left text-sm leading-5 text-dark shadow-md"},{default:_(()=>{var r;return[Oe(Z(((r=p.value)==null?void 0:r.label)??"(None)")+" ",1),U("span",Ce,[N(a,{name:"unfold_more",class:"text-gray-400"})]),N(l,{onResize:m})]}),_:1}),N(C(Be),{class:"max-h-96 w-full overflow-x-hidden rounded-md border border-gray-200 bg-white shadow-lg focus:outline-none"},{default:_(()=>[(j(!0),Re(J,null,we(t.options,r=>(j(),W(C(_e),{key:`${r.label}_${r.value}`,value:r,disabled:r.disabled,as:"template"},{default:_(({active:S,selected:w})=>[U("li",{class:Se(["relative block h-10 w-full cursor-default px-3 py-2 text-left text-sm text-gray-600",{"bg-secondary/50":S,"bg-secondary font-medium text-light":w,"text-gray-300":r.disabled}])},[U("span",Ne,Z(r.label),1)],2)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{$e as default};

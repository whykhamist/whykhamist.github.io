import{a as w,c as V,W as K,am as M,b as P,d as s,m as o,s as i,q as B,g as v,i as A,I as z,P as S,t as y,l as d,f as F,y as L,T as W,p as N,e as I}from"./index-X5AUvwv7.js";const D={class:"relative flex items-center justify-center"},E={key:0,class:"absolute inset-x-0 bottom-0 translate-y-full px-2 pt-1"},H={key:0,class:"absolute inset-x-0 top-0.5 text-center text-xs text-negative"},O={key:1,class:"absolute inset-x-2 top-1 text-center text-[11px] leading-none text-gray-400"},R={class:"grid gap-2"},G={class:"grid grid-cols-3 gap-3"},J={class:"after flex items-center justify-center"},Q={class:"flex items-center justify-center"},U={class:"flex items-center justify-center"},Y={__name:"tPin",props:{modelValue:String,length:{type:Number,default:4},error:{type:Boolean,default:null},errorMessage:{type:String,default:""},hint:{type:String,default:""},confirmation:{type:Boolean,default:!1},allowKeystroke:{type:Boolean,default:!1},randomize:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:T}){const n=t,p=T,a=w(n.modelValue),x=w(null),f=V(()=>{let e=0;return n.randomize&&(e=K.getRandomInt(1,9)),e}),j=V(()=>{let e=Array.from({length:9},(c,l)=>l+1);if(n.randomize){e=e.map(l=>({value:l,sort:Math.random()})).sort((l,u)=>l.sort-u.sort).map(({value:l})=>l);let c=e.indexOf(f.value);e[c]=0}return e});M(x,{initialValue:!0});const m=e=>{/^\d+$/.test(e)&&`${a.value??""}`.length<n.length&&(a.value=`${a.value??""}${e}`,n.confirmation||p("update:modelValue",a.value))},h=()=>{a.value=a.value.slice(0,-1)},b=()=>{n.confirmation&&a.value.length<n.length||p("update:modelValue",a.value)},q=e=>{n.allowKeystroke&&(e.key.toLowerCase()=="enter"?b():e.key.toLowerCase()=="backspace"?h():isNaN(e.key)||m(e.key))};return(e,c)=>{var u,k,C;const l=P("TButton");return s(),o("div",{class:"flex flex-col items-center justify-center gap-5 outline-none",tabindex:"0",ref_key:"pinWrapper",ref:x,onKeyup:q},[i("div",D,[B(e.$slots,"display",{pin:a.value},()=>[i("div",{class:v(["grid gap-2 text-center text-2xl font-bold",[t.error&&"animate-shake text-negative"]]),style:A({gridTemplateColumns:`repeat(${t.length}, minmax(0, 1fr))`})},[(s(!0),o(z,null,S(t.length,r=>{var g,$;return s(),o("div",{key:`${r}`,class:v(["aspect-square w-10 border-b-4 transition-colors",[(g=a.value)!=null&&g[r-1]?"border-foreground/75":"border-gray-400/50",t.error&&"!border-negative"]])},y((($=a.value)==null?void 0:$[r-1])??""),3)}),128))],6)]),t.error!=null&&t.errorMessage!=null||t.hint!=null?(s(),o("div",E,[d(W,{enterFromClass:"opacity-0 -translate-y-full",leaveToClass:"opacity-0 -translate-y-full",enterActiveClass:"transition duration-300",leaveActiveClass:"transition duration-300"},{default:F(()=>[t.error?(s(),o("div",H,y(t.errorMessage),1)):(s(),o("div",O,[B(e.$slots,"hint",{hint:t.hint},()=>[L(y(t.hint),1)])]))]),_:3})])):N("",!0)]),i("div",R,[i("div",G,[(s(!0),o(z,null,S(j.value,r=>(s(),o("div",{key:`keypad_${r}_pin`,class:"flex items-center justify-center"},[d(l,{label:`${r}`,class:"aspect-square w-12 rounded-full border border-foreground/25",onClick:g=>m(r)},null,8,["label","onClick"])]))),128)),i("div",{class:v(["col-span-3 flex items-center gap-3",[!t.confirmation&&"flex-row-reverse"]])},[i("div",J,[d(l,{icon:"backspace",iconSize:"sm",disabled:((u=a.value)==null?void 0:u.length)<=0,class:"aspect-square w-12 rounded-full",onClick:h},null,8,["disabled"])]),i("div",Q,[d(l,{label:`${f.value}`,class:"aspect-square w-12 rounded-full border border-foreground/25",onClick:c[0]||(c[0]=r=>m(f.value))},null,8,["label"])]),i("div",U,[t.confirmation?(s(),I(l,{key:0,icon:"check",iconSize:"sm",disabled:a.value==null||((k=a.value)==null?void 0:k.length)>=0&&((C=a.value)==null?void 0:C.length)<t.length,class:"aspect-square w-12 rounded-full",onClick:b},null,8,["disabled"])):N("",!0)])],2)])])],544)}}};export{Y as default};

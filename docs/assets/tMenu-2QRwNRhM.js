import{K as F,a as x,c as w,L as q,o as Q,M as J,N as Y,n as R,O as Z,b as N,d as h,e as M,f as k,h as S,B as z,j as G,l as T,q as X,p as O,i as ee,I as B,g as D,t as te,s as C,m as L,P as ae}from"./index-pkSQlspo.js";import{y as ne,w as oe,h as le,o as m,c as re,u as se,l as A,H as $,t as j,p as ue,N as K,a as v,v as ie,b as U,_ as V,O as de,U as ce,d as pe}from"./headlessui-float-QzB8mDuE.js";import{t as ve}from"./transitions-WlMxEuXQ.js";import{b as fe,u as me,x as be,a as I}from"./use-tracked-pointer-6XK25H0w.js";import{p as ge}from"./use-tree-walker-reIhSCrF.js";import{p as ye}from"./use-text-value-h7fJSJ2Z.js";import"./floating-ui.vue.esm-AKwc_e8P.js";var Ie=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Ie||{}),he=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(he||{});function xe(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let H=Symbol("MenuContext");function E(a){let f=Z(H,null);if(f===null){let b=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,E),b}return f}let Se=F({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:f,attrs:b}){let g=x(1),e=x(null),p=x(null),r=x([]),d=x(""),c=x(null),s=x(1);function t(l=u=>u){let u=c.value!==null?r.value[c.value]:null,i=de(l(r.value.slice()),y=>m(y.dataRef.domRef)),n=u?i.indexOf(u):null;return n===-1&&(n=null),{items:i,activeItemIndex:n}}let o={menuState:g,buttonRef:e,itemsRef:p,items:r,searchQuery:d,activeItemIndex:c,activationTrigger:s,closeMenu:()=>{g.value=1,c.value=null},openMenu:()=>g.value=0,goToItem(l,u,i){let n=t(),y=be(l===I.Specific?{focus:I.Specific,id:u}:{focus:l},{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});d.value="",c.value=y,s.value=i??1,r.value=n.items},search(l){let u=d.value!==""?0:1;d.value+=l.toLowerCase();let i=(c.value!==null?r.value.slice(c.value+u).concat(r.value.slice(0,c.value+u)):r.value).find(y=>y.dataRef.textValue.startsWith(d.value)&&!y.dataRef.disabled),n=i?r.value.indexOf(i):-1;n===-1||n===c.value||(c.value=n,s.value=1)},clearSearch(){d.value=""},registerItem(l,u){let i=t(n=>[...n,{id:l,dataRef:u}]);r.value=i.items,c.value=i.activeItemIndex,s.value=1},unregisterItem(l){let u=t(i=>{let n=i.findIndex(y=>y.id===l);return n!==-1&&i.splice(n,1),i});r.value=u.items,c.value=u.activeItemIndex,s.value=1}};return ne([e,p],(l,u)=>{var i;o.closeMenu(),oe(u,le.Loose)||(l.preventDefault(),(i=m(e))==null||i.focus())},w(()=>g.value===0)),q(H,o),re(w(()=>se(g.value,{0:A.Open,1:A.Closed}))),()=>{let l={open:g.value===0,close:o.closeMenu};return $({ourProps:{},theirProps:a,slot:l,slots:f,attrs:b,name:"Menu"})}}}),we=F({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${j()}`}},setup(a,{attrs:f,slots:b,expose:g}){let e=E("MenuButton");g({el:e.buttonRef,$el:e.buttonRef});function p(s){switch(s.key){case v.Space:case v.Enter:case v.ArrowDown:s.preventDefault(),s.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case v.ArrowUp:s.preventDefault(),s.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function r(s){switch(s.key){case v.Space:s.preventDefault();break}}function d(s){a.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(s.preventDefault(),e.openMenu(),xe(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let c=fe(w(()=>({as:a.as,type:f.type})),e.buttonRef);return()=>{var s;let t={open:e.menuState.value===0},{id:o,...l}=a,u={ref:e.buttonRef,id:o,type:c.value,"aria-haspopup":"menu","aria-controls":(s=m(e.itemsRef))==null?void 0:s.id,"aria-expanded":e.menuState.value===0,onKeydown:p,onKeyup:r,onClick:d};return $({ourProps:u,theirProps:l,slot:t,attrs:f,slots:b,name:"MenuButton"})}}}),ke=F({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${j()}`}},setup(a,{attrs:f,slots:b,expose:g}){let e=E("MenuItems"),p=x(null);g({el:e.itemsRef,$el:e.itemsRef}),ge({container:w(()=>m(e.itemsRef)),enabled:w(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function r(t){var o;switch(p.value&&clearTimeout(p.value),t.key){case v.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case v.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(o=m(l.dataRef.domRef))==null||o.click()}e.closeMenu(),V(m(e.buttonRef));break;case v.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case v.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case v.Home:case v.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case v.End:case v.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case v.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case v.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>ie(m(e.buttonRef),t.shiftKey?U.Previous:U.Next));break;default:t.key.length===1&&(e.search(t.key),p.value=setTimeout(()=>e.clearSearch(),350));break}}function d(t){switch(t.key){case v.Space:t.preventDefault();break}}let c=ue(),s=w(()=>c!==null?(c.value&A.Open)===A.Open:e.menuState.value===0);return()=>{var t,o;let l={open:e.menuState.value===0},{id:u,...i}=a,n={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(o=m(e.buttonRef))==null?void 0:o.id,id:u,onKeydown:r,onKeyup:d,role:"menu",tabIndex:0,ref:e.itemsRef};return $({ourProps:n,theirProps:i,slot:l,attrs:f,slots:b,features:K.RenderStrategy|K.Static,visible:s.value,name:"MenuItems"})}}}),_=F({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${j()}`}},setup(a,{slots:f,attrs:b,expose:g}){let e=E("MenuItem"),p=x(null);g({el:p,$el:p});let r=w(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===a.id:!1),d=ye(p),c=w(()=>({disabled:a.disabled,get textValue(){return d()},domRef:p}));Q(()=>e.registerItem(a.id,c)),J(()=>e.unregisterItem(a.id)),Y(()=>{e.menuState.value===0&&r.value&&e.activationTrigger.value!==0&&R(()=>{var n,y;return(y=(n=m(p))==null?void 0:n.scrollIntoView)==null?void 0:y.call(n,{block:"nearest"})})});function s(n){if(a.disabled)return n.preventDefault();e.closeMenu(),V(m(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,a.id)}let o=me();function l(n){o.update(n)}function u(n){o.wasMoved(n)&&(a.disabled||r.value||e.goToItem(I.Specific,a.id,0))}function i(n){o.wasMoved(n)&&(a.disabled||r.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:n}=a,y={active:r.value,disabled:n,close:e.closeMenu},{id:P,...W}=a;return $({ourProps:{id:P,ref:p,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:s,onFocus:t,onPointerenter:l,onMouseenter:l,onPointermove:u,onMousemove:u,onPointerleave:i,onMouseleave:i},theirProps:{...b,...W},slot:y,attrs:b,slots:f,name:"MenuItem"})}}});const Me={class:"relative overflow-hidden rounded-md py-0.5"},Re=C("div",null,null,-1),Ce=C("div",null,null,-1),Pe=["onClick"],Te=C("div",null,null,-1),Ne={__name:"tMenu",props:{items:Object,arrow:{type:Boolean,default:!0},offset:{type:Number,default:8},arrowOffset:{type:Number,default:8},autoWidth:{type:Boolean,default:!1},placement:{type:String,default:"bottom-end",validator:a=>["left","top","right","bottom","left-start","top-start","right-start","bottom-start","left-end","top-end","right-end","bottom-end"].indexOf(a)>-1},itemClass:{type:[String,Array],default:()=>[]}},setup(a){const f=a,b=x(0),g=w(()=>Array.isArray(f.itemClass)?f.itemClass:[f.itemClass]),e=r=>{b.value=r.width},p=r=>{let d=ve[r];return{enter:d.enterActiveClass,enterFrom:d.enterFromClass,enterTo:d.enterToClass,leave:d.leaveActiveClass,leaveFrom:d.leaveFromClass,leaveTo:d.leaveToClass}};return(r,d)=>{const c=N("FocusHelper"),s=N("SizeObserver"),t=N("TIcon");return h(),M(S(Se),null,{default:k(()=>[T(S(ce),z({flip:"",portal:"",offset:a.offset,shift:6,arrow:a.arrowOffset,placement:a.placement},p("opacity")),{default:k(()=>[T(S(we),z(r.$attrs,{class:"relative overflow-hidden rounded-md p-0",onClick:d[0]||(d[0]=G(()=>{},["stop"]))}),{default:k(()=>[T(c,{color:"bg-foreground"}),X(r.$slots,"default"),a.autoWidth?(h(),M(s,{key:0,onResize:e})):O("",!0)]),_:3},16),a.items?(h(),M(S(ke),{key:0,class:"max-h-[75vh] min-w-[8rem] overflow-hidden rounded-lg border-x border-foreground/25 bg-page-background text-foreground shadow-md focus:outline-none",style:ee({width:`${b.value}px`})},{default:k(()=>[a.arrow?(h(),M(S(pe),{key:0,class:"absolute h-5 w-5 rotate-45 bg-page-background"})):O("",!0),C("div",Me,[T(S(_),{class:"absolute inset-x-0 top-0 flex items-center bg-foreground/25 py-0.5"},{default:k(()=>[Re]),_:1}),(h(!0),L(B,null,ae(a.items,(o,l)=>(h(),L(B,{key:`menu_item_${l}_${o.label}`},[o.separator?(h(),M(S(_),{key:0,class:D(["flex items-center border-b",[o.separatorColor??"border-foreground/25"]])},{default:k(()=>[Ce]),_:2},1032,["class"])):(h(),L(B,{key:1},[o.hidden?O("",!0):(h(),M(S(_),{key:0,disabled:o.disabled||!o.action,class:D([...g.value,(o.disabled||!o.action)&&"!cursor-not-allowed !text-gray-400"])},{default:k(({active:u})=>[C("button",{type:"button",class:D(["flex w-full items-center px-2 py-1.5 text-left leading-none transition-colors",[u&&(o.activeColor??"bg-primary text-light")]]),onClick:i=>o.action()??null},[o.icon?(h(),M(t,{key:0,name:o.icon,size:"sm",class:"mr-1"},null,8,["name"])):O("",!0),C("span",{class:D(["px-1 leading-none",[!!o.icon&&"border-l"]])},te(o.label),3)],10,Pe)]),_:2},1032,["disabled","class"]))],64))],64))),128)),T(S(_),{class:"absolute inset-x-0 bottom-0 flex items-center bg-foreground/25 py-0.5"},{default:k(()=>[Te]),_:1})])]),_:1},8,["style"])):O("",!0)]),_:3},16,["offset","arrow","placement"])]),_:3})}}};export{Ne as default};

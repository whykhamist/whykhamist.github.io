import{C as A,a as j,c as p,W as N,b as g,d as n,m as r,s as l,B as R,q as I,l as i,p as d,g as c,j as u,h as H,t as S,f as q,T as z}from"./index-X5AUvwv7.js";const E=["for","onDrop"],L={key:0,class:"absolute inset-0"},O=l("div",null,"Drag N' Drop image",-1),U=l("div",null,"- OR -",-1),$=l("div",null,[l("button",{class:"pointer-events-none rounded-md border px-2 py-1 uppercase leading-none"}," Browse ")],-1),P={key:0,class:"absolute right-0 top-0 m-1 flex items-center"},W=["onClick"],G={key:1,class:"absolute left-1 top-1 mr-10 max-w-[90%] flex-auto overflow-hidden text-ellipsis whitespace-nowrap rounded-lg bg-dark/75 p-1 px-2 text-sm leading-none text-slate-50"},J={key:0,class:"absolute inset-x-0 bottom-0 translate-y-full px-2 pt-1 text-[11px] leading-none"},K={key:0,class:"text-[11px] leading-none text-negative"},X={__name:"tImageSelect",props:{modelValue:File,label:{type:String,default:null},initialImageSrc:{type:String,default:null},error:{type:Boolean,default:null},errorMessage:{type:String,default:null},disabled:{type:Boolean,default:!1},circle:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:T}){const C=A(),v=e,D=T,f=j(),a=p({get:()=>v.modelValue,set:t=>D("update:modelValue",t)}),m=p(()=>({id:N.uniqid(),type:"file",accept:"image/*",disabled:v.disabled})),o=p(()=>a.value?URL.createObjectURL(a.value):v.initialImageSrc??null),B=t=>{t.target.files.length>0&&b(t.target.files[0])},V=t=>{t.dataTransfer.files.length>0&&b(t.dataTransfer.files[0])},b=t=>{F(t,m.value.accept)&&(a.value=t)},F=(t,s)=>new RegExp(s.replaceAll("*","[^\\/,]+").replaceAll(" ","").replaceAll(",","|").replaceAll("/","\\/").replaceAll(".","\\.")).test(t.type),y=()=>{f.value.type="",f.value.type="file",a.value=null};return(t,s)=>{var w;const h=g("TImage"),x=g("TIcon"),M=g("FocusHelper");return n(),r("label",{for:m.value.id,class:c(["relative flex select-none",[e.error!=null&&"mb-5",e.circle&&"!rounded-full"]]),onDragenter:s[0]||(s[0]=u(()=>{},["prevent"])),onDragover:s[1]||(s[1]=u(()=>{},["prevent"])),onDragleave:s[2]||(s[2]=u(()=>{},["prevent"])),onDrop:u(V,["prevent"])},[l("input",R(m.value,{onChange:B,class:"hidden",ref_key:"fileInput",ref:f}),null,16),l("div",{class:c(["group relative min-h-[10rem] w-full overflow-hidden rounded-lg border border-dashed border-slate-400 bg-white shadow-md transition",[e.disabled&&"cursor-not-allowed",!e.disabled&&"cursor-pointer hover:border-slate-700",e.error&&"!border-negative",e.circle&&"!rounded-full"]])},[o.value?(n(),r("div",L,[I(t.$slots,"default",{src:o.value},()=>[i(h,{src:o.value,class:"h-full w-full object-cover"},null,8,["src"])])])):d("",!0),l("div",{class:c(["absolute inset-0 flex-auto text-slate-400 transition",[!!o.value&&!e.disabled&&"bg-dark/40 !text-slate-300 group-hover:!text-slate-50",!e.disabled&&"group-hover:text-slate-700",e.disabled&&""]])},[I(t.$slots,"overlay",{src:o.value,disabled:e.disabled,data:a.value,clearFn:()=>y()},()=>{var k;return[l("div",{class:c(["relative flex h-full flex-col items-center justify-center overflow-hidden transition",[!!o.value&&"opacity-20 group-hover:opacity-100"]])},[i(x,{name:"image",size:"xl",class:""}),O,U,$,(k=a.value)!=null&&k.name?(n(),r("span",P,[l("button",{class:"relative overflow-hidden rounded-full p-1 leading-none",onClick:u(y,["prevent","stop"])},[i(M,{color:"bg-negative"}),i(x,{name:"close"})],8,W)])):d("",!0)],2)]})],2),(w=a.value)!=null&&w.name&&!e.circle&&!H(C).overlay?(n(),r("div",G,S(a.value.name),1)):d("",!0)],2),e.error!=null?(n(),r("div",J,[i(z,{"enter-from-class":"-translate-y-full opacity-0","leave-to-class":"-translate-y-full opacity-0","enter-active-class":"transition duration-300","leave-active-class":"transition duration-300"},{default:q(()=>[e.error===!0?(n(),r("div",K,S(e.errorMessage),1)):d("",!0)]),_:1})])):d("",!0)],42,E)}}};export{X as default};
